(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};videojs.plugin("ga",function(t){var n,a,i,r,o,l,s,d,c,u,h,v,f,p,m,y,g,_,M,k,T,w,L,N,b,C,P,S,z,E,F,V,x,I;return null==t&&(t={}),b=document.createElement("a"),b.href=document.referrer,self!==top&&"preview-players.brightcove.net"===window.location.host&&(b.hostname="studio.brightcove.com")?void videojs.log("GTM plugin will not track events in Video Cloud Studio"):(N=this,i={},this.options()["data-setup"]&&(M=JSON.parse(this.options()["data-setup"]),M.ga&&(i=M.ga)),o=["player_load","video_load","percent_played","start","end","seek","play","pause","resize","volume_change","error","fullscreen"],v=t.eventsToTrack||i.eventsToTrack||o,w=t.percentsPlayedInterval||i.percentsPlayedInterval||10,c=t.eventCategory||i.eventCategory||"Brightcove Player",r=t.eventLabel||i.eventLabel,T=[],V=!1,s=!1,S=P=0,z=!1,u="",a="",h={video_load:"Video Load",percent_played:"Percent played",start:"Media Begin",seek_start:"Seek start",seek_end:"Seek end",play:"Media Play",pause:"Media Pause",error:"Error",fullscreen_exit:"Fullscreen Exited",fullscreen_enter:"Fullscreen Entered",resize:"Resize",volume_change:"Volume Change",player_load:"Player Load",end:"Media Complete"},p=function(e){return t.eventNames&&t.eventNames[e]?t.eventNames[e]:i.eventNames&&i.eventNames[e]?i.eventNames[e]:h[e]?h[e]:e},n=/(\s|^)vjs-ad-(playing|loading)(\s|$)/,g=function(e){return n.test(e.el().className)},_=function(){g(N)||(u=r?r:N.mediainfo&&N.mediainfo.id?N.mediainfo.id+" | "+N.mediainfo.name:this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,""),N.mediainfo&&N.mediainfo.id&&N.mediainfo.id!==a&&(a=N.mediainfo.id,T=[],V=!1,s=!1,S=P=0,z=!1,e.call(v,"video_load")>=0&&E(p("video_load"),!0)))},x=function(){var t,n,a,i,r;if(!g(N)){for(t=Math.round(this.currentTime()),n=Math.round(this.duration()),i=Math.round(t/n*100),a=r=0;r<=99;a=r+=w)i>=a&&e.call(T,a)<0&&(e.call(v,"percent_played")>=0&&0!==i&&E(p("percent_played"),!0,a),i>0&&T.push(a));e.call(v,"seek")>=0&&(S=P,P=t,Math.abs(S-P)>1&&(z=!0,E(p("seek_start"),!1,S),E(p("seek_end"),!1,P)))}},l=function(){g(N)||s||(E(p("end"),!0),s=!0)},L=function(){var e;g(N)||(e=Math.round(this.currentTime()),E(p("play"),!0,e),z=!1)},F=function(){if(!g(N)&&e.call(v,"start")>=0&&!V)return E(p("start"),!0),V=!0},k=function(){var e,t;g(N)||(e=Math.round(this.currentTime()),t=Math.round(this.duration()),e===t||z||E(p("pause"),!0,e))},I=function(){var e;e=this.muted()===!0?0:this.volume(),E(p("volume_change"),!1,e)},C=function(){E(p("resize")+" - "+this.width()+"*"+this.height(),!0)},d=function(){var e;e=Math.round(this.currentTime()),E(p("error"),!0,e)},f=function(){var e;e=Math.round(this.currentTime()),("function"==typeof this.isFullscreen?this.isFullscreen():void 0)||("function"==typeof this.isFullScreen?this.isFullScreen():void 0)?E(p("fullscreen_enter"),!1,e):E(p("fullscreen_exit"),!1,e)},E=function(e,t,n){dataLayer.push({eventCategory:c,eventAction:e,eventLabel:u,event:"videoEvent",eventValue:n,nonInteraction:t})},void this.ready(function(){this.on("loadedmetadata",_),this.on("timeupdate",x),e.call(v,"end")>=0&&this.on("ended",l),e.call(v,"play")>=0&&this.on("play",L),e.call(v,"start")>=0&&this.on("playing",F),e.call(v,"pause")>=0&&this.on("pause",k),e.call(v,"volume_change")>=0&&this.on("volumechange",I),e.call(v,"resize")>=0&&this.on("resize",C),e.call(v,"error")>=0&&this.on("error",d),e.call(v,"fullscreen")>=0&&this.on("fullscreenchange",f),e.call(v,"player_load")>=0&&(self!==top?(m=document.referrer,y=1):(m=window.location.href,y=0),dataLayer.push({eventCategory:c,eventAction:p("player_load"),eventLabel:m,event:"videoEvent",eventValue:y,nonInteraction:!0}))}))})}).call(this);